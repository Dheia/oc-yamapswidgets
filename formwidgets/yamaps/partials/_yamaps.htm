<?php if ($this->previewMode): ?>
    <div class="form-control"><?= e($value) ?></div>
<?php else: ?>
    <div
        id="<?= $this->getId() ?>"
        class="field-yandex-place">
        <div id="<?= $this->getId('textarea') ?>-div" style="height: <?=e($height)?>; width: 100%"></div>
        <input
            type="hidden"
            name="<?= $name ?>"
            id="<?= $this->getId('textarea') ?>"
            value="<?= e($value) ?>"
            class="form-control"
            data-control="location-autocomplete"
            <?= $field->getAttributes() ?>
            <?= $this->getFieldMapAttributes() ?>
            />
    </div>
<?php endif ?>
<script type="text/javascript">
$(function(){
    var fieldName = "<?= $field->fieldName; ?>",
    mapDiv = "<?= $this->getId('textarea') ?>",
    options = {
        editable: <?=($editable === true) ? "true" : "false" ?>,
        markers: <?=$markers?>
    },
    getMapPosition = parsePos($("#" + mapDiv).val());

    marker["<?= $field->fieldName; ?>"] = fieldName;
    inicializar(getMapPosition[0], getMapPosition[1], 15, fieldName, mapDiv, options);
});
</script>